# Spring Boot and Camel websocket

## Building

The example can be built with

```
mvn clean install
```    
## Running the example with maven

*NOTE:* for this example you need a running amq on your environment
    
```    
mvn spring-boot:run -s <path_to_setting>
```

eg:

```    
mvn spring-boot:run -s ../settings.xml
```

# Running the example in OpenShift

## AMQ setup

In the templates dir there is a simple template for:

* A-MQ 6.2
* Ephemeral
* openwire protocol only (on port 61616)
* no SSL

To import the template do:

```
oc create -f templates/amq62-basic-tcp.json
```

### Create the broker from template

After the template is imported, we can use it to create the service: check if all the default values are present.

![template creation](images/template-selection.png)

## Create the alert service

Create the application from s2i (default values match with amq templates).

## Testing the websocket

After the app is deployed go to the service public URL:

alert-<svc-route>-<project-name>.<openshift-public-dns>

In the appa change the connection URL eg:

ws://alert-route-microservice-example.apps.my.openshift.com:80/alerts

Now we can connect to the websocket and we can see the event generated by the service.